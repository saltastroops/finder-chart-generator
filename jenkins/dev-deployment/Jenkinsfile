@Library('saao-shared-library@run-python-tests') _

pipeline {
  agent {
    dockerfile {
      filename 'Dockerfile'
      dir 'jenkins/dev-deployment'
      args '-v finder-chart-generator-venv:/venv -u 0:0'
    }
  }

  stages {
    stage("Run tests") {
      steps {
        saaoRunPythonTests()
      }
    }
//     stage("Deploy the site") {
//       steps {
//         saaoDeployContainer(
//           host: "${FCG_DEV_HOST}",
//           hostCredentialsId: 'fcg-dev-server-credentials',
//           imageName: 'finder-chart-generator',
//           registryCredentialsId: 'docker-registry-credentials',
//           registryUrl: "${DOCKER_REGISTRY}"
//         )
//       }
//     }
  }

  post {
    always {
      cleanWs()
    }
  }
}
